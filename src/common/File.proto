syntax = "proto3";

package File;

// Time
import "google/protobuf/timestamp.proto";

option go_package = "./";

/**
 * Metadata regarding a file itself and its location
 */
message FileApproxMetadata {
  string name = 1; // Filename | to be concatenated after dirname to find full absolute path
  string dirPath = 2; // Directory absolute path | to be concatenated before name to find full absolute path
  string userId = 3; // User identifier, generated by database | TODO clearly define userID globally
}

message FileMetadata {
  FileApproxMetadata approxMetadata = 1;
  string fileId = 2; // TODO clearly define fileID globally
  bool isDownloadable = 3;
  string lastEditorId = 4; // TODO clearly define userID globally
  google.protobuf.Timestamp creation = 5;
  google.protobuf.Timestamp lastEdit = 6;
}

message File {
  FileMetadata metadata = 1;
  bytes content = 2;
}

message NewFile {
  FileApproxMetadata metadata = 1;
  bytes content = 2;
}

message FilesIndex {
  repeated FileMetadata index = 1;
}